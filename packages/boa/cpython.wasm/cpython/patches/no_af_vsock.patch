diff --git a/Modules/socketmodule.h b/Modules/socketmodule.h
index fdb4e871ce..c990003ff3 100644
--- a/Modules/socketmodule.h
+++ b/Modules/socketmodule.h
@@ -144,6 +144,8 @@ typedef int socklen_t;
 extern "C" {
 #endif
 
+#undef AF_VSOCK
+
 /* Python module and C API name */
 #define PySocket_MODULE_NAME    "_socket"
 #define PySocket_CAPI_NAME      "CAPI"
